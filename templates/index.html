<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chatbot</title>
    <!-- Adicionando CSS do Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Adicionando CSS personalizado -->
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
</head>
<body>
<div class="container py-5">
    <h1 class="text-center mb-4">AI Girlfriend</h1>
    <div class="card chat-card">
        <div class="card-body">
            <div id="chat_box">
                <!-- Aqui vão aparecer as mensagens e respostas -->
            </div>
            <form method="POST" action="/send_message" class="mt-3">
                <div class="mb-3">
                    <input type="text" name="human_input" placeholder="Enter your message..." class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Send...</button>
            </form>
        </div>
    </div>
</div>

<!-- Adicionando JS do Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script>
    const form = document.querySelector('form');
    const chatBox = document.getElementById('chat_box');

    const scrollToBottom = () => {
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    form.addEventListener('submit', function (e) {
        e.preventDefault();
        const formData = new FormData(form);
        fetch('/send_message', {
            method: 'POST',
            body: formData
        })
            .then(response => response.text())
            .then(data => {
                // Adicionando a mensagem do usuário
                const userMessageDiv = document.createElement('div');
                userMessageDiv.innerHTML = `<p class="user-message">${formData.get('human_input')}</p>`;
                chatBox.appendChild(userMessageDiv);
                // Adicionando a resposta do bot
                const botMessageDiv = document.createElement('div');
                botMessageDiv.innerHTML = `<p class="chat-response">${data}</p>`;
                chatBox.appendChild(botMessageDiv);
                scrollToBottom();
            });
        form.reset();
    });
</script>
</body>
</html>
